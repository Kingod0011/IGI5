{% extends "base_generic.html" %}

{% block content %}
    {% if user.is_authenticated %}
    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit">Logout</button>
    </form>
    <form action="{% url 'profile' %}" method="get">
        {% csrf_token %}
        <button type="submit">Profile</button>
    </form>
    
        {% if is_employee %}
        <form action="{% url 'clients' %}" method="get">
            {% csrf_token %}
            <button type="submit">Clients</button>
        </form>
        <form action="{% url 'orders' %}" method="get">
            {% csrf_token %}
            <button type="submit">Orders</button>
        </form>
        {% endif %}
    {% else %}
    <form action="{% url 'register' %}" method="get">
        {% csrf_token %}
        <button type="submit">Register</button>
    </form>
    <form action="{% url 'login' %}" method="get">
        {% csrf_token %}
        <button type="submit">Login</button>
    </form>
    {% endif %}

    <form action="" method="get">
        <label for="price_min">Price from:</label>
        <input type="number" id="price_min" name="price_min" value="{{ request.GET.price_min }}">
        <label for="price_max">to:</label>
        <input type="number" id="price_max" name="price_max" value="{{ request.GET.price_max }}">
        <label for="producttype">ProductType:</label>
        <select id="producttype" name="producttype">
            <option value="">All</option>
            {% for producttype in producttypes %}
                <option value="{{ producttype }}" {% if request.GET.producttype == producttype.name %}selected{% endif %}>{{ producttype }}</option>
            {% endfor %}
        </select>
        <label for="search">Search (by name):</label>
        <input type="text" id="search" name="search" value="{{ request.GET.search }}">
        <input type="submit" value="Filter">
    </form>

    {% for product in products %}
        <div>
            <h2>{{ product }}</h2>
            {% if is_employee %}
                
            {% else %}
            <form action="{% url 'create_order' product.id %}" method="get">
                {% csrf_token %}
                <input type="submit" value="Order">
            </form>
            {% endif %}
        </div>
    {% endfor %}
{% endblock %}
